# https

3. http와 https의 프로토콜의 차이점
4. 보안 수준이 높아지면 일반적으로 전송 속도가 느려진다. https 프로토콜에서는 이를 어떻게 극복하고 있는가?
5. https 동작 원리 (sever hello 세 가지 정보)
6. 사용자 입장에서 생각했을 때 어떤 프로토콜을 사용하는 것이 좋을까?
    1. 왜?
    2. https는 보안 문제를 어떻게 해결하고 있나?

## https란?

hypertext transfer protocol secure의 약자로, 사용자 컴퓨터와 방문한 사이트 간에 전송되는 사용자 데이터의 무결성과 기밀성을 유지할 수 있도록 해주는 인터넷 통신 프로토콜입니다.

## 일반 http 프로토콜의 문제점은?

서버에서부터 브라우저로 전달되는 정보가 암호화되지 않는다는 문제점이 있었습니다. 따라서 데이터를 중간에 가로채갈 위험이 존재합니다. 따라서 https 는 SSL(보안 소켓 계층)을 이용하여 이 문제를 해결합니다. SSL은 서버와 브라우저 사이에 안전하게 암호화된 연결을 만들 수 있게 해주고, 데이터가 도난당하는 것을 막아줍니다.

## https ssl 프로토콜에 사용되는 암호화 방식은?

https 프로토콜에서는 두 가지 암호화 방식이 사용됩니다. 두 가지 방법을 섞어쓰는 이유는, 일반적으로 비대칭키 알고리즘이 훨씬 안전하지만, 대칭키에 비하여 속도가 느립니다. 따라서 두 방식의 단점들을 보완하기 위하여 두 암호화 알고리즘을 모두 사용하게 되었습니다.

- 공개키/비공개키(비대칭) 암호화
    - 공개키/비공개키는 데이터를 전송하기 전에 안전한 의사소통 과정을 만드는데 사용됩니다.
    - 안전한 환경이 만들어지면, 브라우저와 서버는 임의의 대칭 키를 만들어 데이터를 교환합니다.
- 대칭키
    - 데이터를 전송하는데 사용되는 암호화 키입니다.

## https 프로토콜 동작 과정에 대해 설명해주세요.

https 동작 과정은 크게 세 가지 과정으로 나눌 수 있습니다.

1. handshake과정
2. session 과정
3. session 종료

### handshake 과정에 대하여 설명해주세요.

(여기서는 이미 서버가 https 통신에 필요한 공개키와 개인키를 구성하고, 서버정보와 서버의 공개키를 CA 인증기관에 위임하여 클라이언트가 요청 시 인증서를 넘겨줄 수 있는 상태라 가정합니다.)

1. client hello → 클라이언트는 다음의 정보를 서버로 전송합니다.
    - 클라이언트에서 생성한 임의의 난수 정보
    - 클라이언트에서 사용할 수 있는 암호화 알고리즘 리스트
    - 이전에 현재 서버와 세션을 진행했었다면, 해당 세션 ID
2. server hello → 서버가 응답을 받았다면, 클라이언트로 다음의 정보를 전송합니다.
    - 서버가 생성한 임의의 난수
    - 클라이언트로부터 사용할 수 있는 암호화 알고리즘 중 선택한 알고리즘 종류
    - **인증서**
3. 인증서 확인 과정 및 pre-master-secret key 생성(클라이언트)
    - 서버로부터 받은 인증서를 발급한 기관이 신뢰할 수 있는 기관인지 브라우저의 화이트리스트에서 확인합니다.
    - 신뢰할 수 있는 기관임이 확인되면, 서버에서 받아온 임의의 난수와 클라이언트에서 생성한 난수를 조합하여 pre-master-secret key를 생성합니다. 이는 후에 데이터를 전송하는데 사용할 대칭 키로 사용합니다.
4. pre-master-secret key 암호화 및 서버로 전송
    - 클라이언트는 인증서에 담겨온 서버의 공개키를 이용하여 pre-master-key를 암호화하고 서버로 전송합니다.
5. pre-master-secret key 복호화
    - 서버는 전달받은 pre-master-key를 서버의 공개키를 이용하여 복호화합니다.
6. 일련의 과정을 거쳐 master-secret-key 생성

### session 과정

handshake 과정을 통해 만든 대칭키를 이용하여 데이터의 전송이 이루어집니다.

### session 종료

데이터 교환이 끝나면, 세션이 종료되고 사용되었던 대칭키는 폐기합니다.