**참고 레퍼런스 꼭 달아주세요.**

모던 자바스크립트 딥 다이브 23장 실행 컨텍스트

[우테코 10분 테코톡 - 하루의 실행컨텍스트](https://www.youtube.com/watch?v=EWfujNzSUmw&t=812s)

[veriable과 LexicalEnvironment(코어 자바스크립트)](https://overcome-the-limits.tistory.com/331?category=969104)

[Execution context, Scope chain and JavaScript internals](https://medium.com/@happymishra66/execution-context-in-javascript-319dd72e8e2c)
# 예상질문 및 답변

## 1. 실행 컨텍스트는 언제 생성되는가?

우선 코드의 타입에 따라 생성 시점이 달라집니다. 코드 타입은 총 4가지로 구분됩니다.
1. 전역코드
2. 함수코드
3. eval함수
4. 모듈코드

1. 가장 처음에 전역 실행 컨텍스트가 생성됩니다. 모든 코드는 전역 실행 컨텍스트 안에서 실행됩니다.
2. 함수가 호출되면 함수 내부의 함수 코드가 평가되고 함수 실행컨텍스트가 생성됩니다.
3. 빌트인 전역 함수인 eval 함수에 인수로 전달되어 실행되는 소스코드는 함수내부에 실행컨텍스트를 생성합니다.
4. 모듈 내부에 존재하는 소스코드가 평가될 때 모듈 실행컨텍스트가 생성됩니다.

## 실행 컨텍스트는 어떤 정보가 담겨 있는가?

1. 식별자 정보와 식별자에 바인딩 된 값

**식별자란?**
- 변수, 함수, 클래스 등의 이름을 모두 식별자라고 한다. 예를 들어 `let x`, `var y`, `function z()` 에서 x, y, z를 '식별자'라고 한다.

**식별자에 바인딩 된 값이란?**
- 자바스크립트 엔진은 코드를 실행하기 앞서 코드를 평가하면서 식별자를 실행컨텍스트의 렉시컬환경에서 key-value 형태로 관리한다. 이 때 key를 식별자, value를 식별자에 바인딩 된 값이라고 한다.

**왜 식별자에 값이 "바인딩" 되었다고 표현하는지?**
- 어떤 키워드로 선언하였냐에 따라서 "선언"단계와 "초기화"단계가 분리되거나 동시에 일어난다. var로 선언한 키워드는 "선언"단계와 "초기화" 단계가 동시에 이루어지고 암묵적으로 undefined로 할당이 된다. 이런 과정을 **식별자에 값이 바인딩이 되었다**라고 할 수 있고 이 과정이 호이스팅이 발생하게 되는 이유이다. 이후 런타임에 할당문을 만나면 다시 값이 할당이 되는데, 식별자에 값이 다시 바인딩이 된 것이라 할 수 있다.
  
2. 식별자 스코프
- 실행컨텍스트는 렉시컬 환경이라는 자료구조를 가지고 있고, 렉시컬 환경에 "상위 스코프"에 대한 정보가 담겨있다.
  
3. 코드 실행 순서
- 실행컨텍스트는 실행컨텍스트 스택이라는 자료구조를 가지고 있고, 실행컨텍스트 스택을 통해 코드 실행 순서를 관리한다.
  
4. this 바인딩
- this 바인딩은 코드가 평가되어 실행 컨텍스트가 생성된 이후에, 런타임에서 함수의 호출 방식에 따라 결정된다. this바인딩에 대한 정보도 실행 컨텍스트 안에서 관리된다.

## 실행 컨텍스트를 아는 것은 왜 중요한가?

실행 컨텍스트는 자바스크립트의 핵심 개념, 실행 컨텍스트를 이해하면 자바스크립트가 스코프를 기반으로 식별자와 식별자에 바인딩된 값을 관리하는 방식과 호이스팅이 발생하는 이유, 클로저의 동작 방식, 그리고 태스크 큐와 함께 동작하는 이벤트 핸들러와 비동기 처리의 동작 방식을 이해할 수 있다.

## 렉시컬 환경은 무엇인가?

실행컨텍스트는 식별자와 스코프를 관리하기 위해 렉시컬 환경이라는 영역을 가지고 있다. LexicalEnvironment은 식별자에 대한 정보를 관리하는 환경레코드 컴포넌트, 상위 스코프를 가리키는 외부 렉시컬 환경에 대한 참조 컴포넌트 2가지로 구성되어 있다.

## 클로저와 실행 컨텍스트는 어떤 관계가 있는가?

함수가 호출되면 함수가 평가되며 이 때 함수 실행 컨텍스트가 생성된다. 그리고 함수가 종료되었을 때, 실행 컨텍스트 스택에서 함수 실행컨텍스트는 사라졌지만 렉시컬 환경에 대한 객체는 즉시 사라지지 않는다. 만약 어떤 객체가 이 렉시컬 환경을 참조하고 있다면 이 렉시컬 환경은 계속 존재하며 이를 클로저라 한다. (아무도 참조하지 않는다면 가비지 컬렉터에 의해 메모리 상에서 제거된다)

## 스코프 체인은 무엇인가?

현재 실행중인 실행컨텍스트의 스코프에서 찾는 값이 없을 때 상위 스코프로 올라가서 찾는 방식.
